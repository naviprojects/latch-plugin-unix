.TH "PAM_LATCH" "8" "08/01/2015" "Latch-PAM Manual" "Latch\-PAM Manual"
.
.
.SH "NAME"
pam_latch \- PAM module to protect authentication with latch
.
.
.SH "SYNOPSIS"
\fBpam_latch.so\fR [config=\fICONFIG_FILE\fR] [accounts=\fIACCOUNTS_FILE\fR] operation=\fIOPERATION\fR [otp=\fIyes\fR|\fIno\fR]
.
.
.SH "DESCRIPTION"
.PP
This provides the PAM module needed to interact with Latch Servers.
.PP
A helper binary,
\fBlatch\fR(8), is provided to pair and unpair user accounts with Latch, and also check their status with Latch Servers.
.
.
.SH "OPTIONS"
.PP
\fBconfig=\fR\fB\fI/path/to/latch.conf\fR\fR
.RS 4
Indicate the latch.conf configuration file to be used.
.PP
By default, if this option is not specified, configuration file is \fI/etc/latch/latch.conf\fR.
.RE
.PP
\fBaccounts=\fR\fB\fI/path/to/latch.accounts\fR\fR
.RS 4
Indicate the latch.accounts accounts file to be used.
.PP
By default, if this option is not specified, accounts file is \fI/etc/latch/latch.accounts\fR.
.RE
.PP
\fBoperation=\fR\fB\fIOPERATION\fR\fR
.RS 4
Name to be used in the configuration file to indicate the \fIoperation id\fR. See \fBlatch\fR(8).
.RE
.PP
\fBotp=\fIyes\fR|\fIno\fR
.RS 4
Enable or disable the One-time password option (no is disabled, yes is enabled). By default this option is \fIno\fR.
.RE
.
.
.SH "MODULE TYPES PROVIDED"
.PP
Only module type \fBauth\fR is provided.
.
.
.SH "RETURN VALUES"
.PP
PAM_AUTH_ERR
.RS 4
This value is returned when Latch is \fBclosed\fR or default action option was set to \fB"closed"\fR when connexion with Latch Servers failed.
.RE
.PP
PAM_SUCCESS
.RS 4
This value is returned when Latch is \fBopen\fR, user is not paired, there is some invalid parameter in the configuration file or default action option was set to \fB"open"\fR when connexion with Latch Servers failed.
.RE
.
.
.SH "EXAMPLES"
.PP
An example usage for
/etc/pam\&.d/gdm3
would be:
.sp
.if n \{\
.RS 4
.\}
.nf
#%PAM-1.0
auth    requisite       pam_nologin.so
auth	required	pam_succeed_if.so user != root quiet_success
@include common-auth
auth	required	pam_latch.so config=/etc/latch/latch.conf accounts=/etc/latch/latch.accounts operation=login otp=yes
auth    optional        pam_gnome_keyring.so   
.fi
.if n \{\
.RE
.\}
.sp
.
.
.SH "SSH CONFIGURATION"
Edit sshd_config (usually in /etc or /etc/ssh) to add the following lines:
.sp
.if n \{\
.RS 4
.\}
.nf
UsePAM yes
ChallengeResponseAuthentication yes
PasswordAuthentication no
.fi
.if n \{\
.RE
.\}
.sp
.
.
.SH "AUTHOR"
.PP
pam_unix was written by ElevenPaths.
.
.
.SH SUPPORT
Report latch bugs to latch-help@support.elevenpaths.com
.br
For more information, <https://latch.elevenpaths.com/>
.
.
.SH COPYRIGHT
Copyright \(co 2015 Eleven Paths. License LGPL-2.1: GNU Lesser General Public License version 2.1.
.br
This program is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public
License as published by the Free Software Foundation; either
version 2.1 of the License, or (at your option) any later version.
.
.
.SH "SEE ALSO"
.PP
\fBlatch\fR(8),
\fBpam.d\fR(5),
\fBlatch_ssh_command\fR(8)
